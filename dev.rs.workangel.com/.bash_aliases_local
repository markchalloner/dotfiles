# Git
alias git="func_git"

# Log
alias log="func_log"

# Mongo
alias mongo-restart="sudo bash -c 'service mongod stop; rm /data/mongod.lock > /dev/null 2>&1; service mongod start'"
alias mongo-restore="mongorestore --drop --db wam /vagrant/tmp/dump/wam"
alias mongo-restore-staging="mongorestore --drop --db wam_staging /vagrant/tmp/dump/wam"
alias mongo-run="mongo localhost:27017/wam"

# Navigation
alias pushwa="func_pushd ${WA_ROOT}"
alias cdwa="builtin cd ${WA_ROOT}"
alias cdapi="builtin cd ${WA_ROOT}/wa-api"
alias cdarch="builtin cd ${WA_ROOT}/wa-arch"
alias cdcontent="builtin cd ${WA_ROOT}/wa-api-content"
alias cddoc="builtin cd ${WA_ROOT}/wa-api-documentation"
alias cdbackend="builtin cd ${WA_ROOT}/wa-backend"
alias cdhermes="builtin cd ${WA_ROOT}/wa-hermes"
alias cdinfra="builtin cd ${WA_ROOT}/wa-infrastructure"
alias cdsso="builtin cd ${WA_ROOT}/wa-sso"
alias cdwatmp="builtin cd ${WA_ROOT}/tmp"
alias cdzeus="builtin cd ${WA_ROOT}/wa-zeus"

# Rake
alias rakeall="(builtin cd ${HOME} && _ rake api:vagrant && _ rake arch:vagrant && _ rake backend:vagrant && _ rake bouncer:vagrant && _ rake hermes:vagrant && _ rake sso:vagrant && _ rake shim:vagrant && _ rake zeus:vagrant && _ rake automationbackend:vagrant && _ rake db:new)"
alias rakedb="(cdapi && _ rake api:db && _ deployment/generate-doctrine.sh && cdarch && rake arch:db)"
alias rakebadge="source ~/.bashrc; source /srv/environment; _ php /srv/wa-api/public/index.php setup badge create"

# Xdebug
alias xdbapi="xdb wa-api"
alias xdbbackend="xdb wa-backend"

# WA
alias wabackendls="sudo bash -c 'source /srv/environment && php /srv/wa-backend/public/index.php' | less -R"
alias wakill="wakillpm && wakilljb"
alias wakilljb="sudo pkill -f '^php [^ ]+ job processqueue\$'"
alias wakillpm="sudo pkill -f '^php [^ ]+ process manager start\$'"
alias wastartjb="wakilljb; source ~/.bashrc; source /srv/environment; php /srv/wa-api/public/index.php job processqueue"
alias wastartpm="wakillpm; source ~/.bashrc; source /srv/environment; php /srv/wa-api/public/index.php process manager start"
alias wastatus="wastatuspm && wastatusjb"
alias wastatusjb="sudo pgrep -f '^php [^ ]+ job processqueue\$' > /dev/null; if [ \${?} -eq 0 ]; then echo 'Job queue is running'; else echo 'Job queue is not running'; fi"
alias wastatuspm="sudo pgrep -f '^php [^ ]+ process manager start\$' > /dev/null; if [ \${?} -eq 0 ]; then echo 'Process manager is running'; else echo 'Process manager is not running'; fi"
