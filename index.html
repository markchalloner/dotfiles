#!/bin/bash
# Vars
DIR="${HOME}/dotfiles"

# Install link-files
if ! type link-files > /dev/null 2>&1
then
  curl -LsS https://markchalloner.github.io/link-files | bash
fi

# Create dir
mkdir -p "${DIR}"
(
  cd "${DIR}"

  # Download
  if [ -d ".git" ]
  then
    git pull
  else
    git clone git@github.com:markchalloner/dotfiles.git .
  fi

  # Set user
  git config user.name "Mark Challoner"
  git config user.email "mark.a.r.challoner@gmail.com"
)

# Link
if [ ! -x "${HOME}/.link-files" ]
then
  ln -s "${DIR}" "${HOME}/.link-files"
fi

# Install
link-files -i -o

# Run
. "${HOME}/.bash_profile"

