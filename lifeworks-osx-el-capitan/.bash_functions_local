func_gh() {
  local path="${1}"
  local url_base="https://github.com"
  local url_company="${url_base}/workivate"
  local url=
  local sub=
  if $(git status > /dev/null 2>&1)
  then
    if [ -n "${path}" ]
    then
      hub browse -- "${path}"
    else
      hub browse
    fi
    return
  fi
  case "${path}" in
    "f"|"feed")
      url="${url_base}"
      ;;
    "p"|"pulls")
      author="${2:-markchalloner}"
      url="${url_base}/pulls?q=is%3Apr+author%3A${author}"
      ;;
    [0-9]*)
      url="${url_company}/wa-api/pull/${path}"
      ;;
    "")
      url="${url_company}"
      ;;
    *)
      case "${path}" in
        "android"|"api"|"arch"|"backend"|"hermes"|"ios"|"sso"|"zeus")
          path="wa-${path}"
          ;;
        "be")
          path="wa-backend"
          ;;
        "content")
          path="wa-api-content"
          ;;
        "doc")
          path="wa-api-documentation"
          ;;
        "infra")
          path="wa-infrastructure"
          ;;
      esac
      shift 
      sub="${@}"
      sub="${sub// //}"
      url="${url_company}/${path}/${sub}"
      ;;
  esac
  open "${url}"
}

func_jr() {
  local ticket="${1}"
  local branch=
  local board=218
  local url_base="https://workivate.atlassian.net"
  local url=
  if [ -z "${ticket}" ] && $(git status > /dev/null 2>&1)
  then
    branch="$(git rev-parse --abbrev-ref HEAD)"
    if $(echo "${branch}" | grep -q '^\w\+-\d\+$')
    then
      ticket="${branch}"
    fi
  fi
  case "${ticket}" in
    "b"|"backlog")
      url="${url_base}/secure/RapidBoard.jspa?rapidView=${board}&view=planning.nodetail"
      ;;
    "a"|"agile")
      url="${url_base}/secure/RapidBoard.jspa?rapidView=${board}"
      ;;
    "h"|"home"|"dashboard"|"")
      url="${url_base}/secure/Dashboard.jspa"
      ;;
    *)
      ticket="$(echo "${ticket}" | tr '[:lower:]' '[:upper:]' | sed 's/^\([A-Z][A-Z]*\)\([0-9][0-9]*\)/\1-\2/g')"
      if $(echo "${ticket}" | grep -q '^\d\+$')
      then
        ticket="RA-"${ticket}
      fi
      url="${url_base}/browse/${ticket}"
      ;;
  esac
  if [ -n "${url}" ]
  then
    open "${url}"
  fi
}


func_phpstorm() {
  local file="${1}"
  if [ "${file:0:1}" == "/" ]
  then
    file="${file/\/srv/${HOME}/Vagrant/wa}"
  else
    file="$(pwd)/${file}"
  fi
  /Applications/PhpStorm.app/Contents/MacOS/phpstorm "${file}"
}
